# 宅建士クイズアプリ - 要件定義書

## 1. プロジェクト概要

| 項目 | 内容 |
|------|------|
| アプリ名 | （未定）宅建士クイズ系 |
| 対象資格 | 宅地建物取引士（宅建士） |
| プラットフォーム | Flutter（Android優先、iOS対応予定） |
| 収益モデル | 無料 + 広告（AdMob） |
| リポジトリ | 本リポジトリ（1資格 = 1リポジトリ） |

## 2. 機能一覧

### 2.1 一問一答モード
- 分野を選択して学習できる
- 1問ずつ出題 → 回答 → 正誤表示 → 解説表示
- 次の問題に進む / 前の問題に戻る
- 間違えた問題にフラグを自動付与
- 終了タイミングは自由（いつでもやめられる）

### 2.2 テストモード
- 出題数を選択（10 / 20 / 30 / 50 問）
- 全分野からランダムに出題（分野指定も可能）
- 全問回答後に採点・結果画面を表示
- 結果画面: 点数、正答率、分野別正答率
- テスト完了時にインタースティシャル広告を表示

### 2.3 復習機能
- 間違えた問題一覧を確認できる
- フラグ付き問題だけで一問一答できる
- 手動でフラグの付け外しが可能

### 2.4 学習記録・進捗管理
- テスト履歴（日時、点数、正答率）の保存・一覧表示
- 分野別の正答率表示（苦手分野の可視化）
- 全体の学習進捗（解いた問題数 / 全問題数）

### 2.5 広告
- 画面下部にバナー広告（常時表示）
- テストモード完了時にインタースティシャル広告

## 3. 出題仕様

### 3.1 問題形式
- 4択問題のみ
- 各問題に解説付き

### 3.2 出題分野（宅建士試験公式4分野）
| 分野 | 内容例 | 出題配分目安 |
|------|--------|-------------|
| 権利関係 | 民法、借地借家法、不動産登記法、区分所有法 | 約14問/50問 |
| 宅建業法 | 宅建業法全般、37条書面、35条書面 | 約20問/50問 |
| 法令上の制限 | 都市計画法、建築基準法、国土利用計画法 | 約8問/50問 |
| 税・その他 | 不動産取得税、固定資産税、鑑定評価、統計 | 約8問/50問 |

### 3.3 問題データ
- 事前にClaude APIで500問を生成
- JSON形式でアプリにバンドル（ローカル保存）
- 問題追加はアプリアップデートで対応

### 3.4 問題データ構造（案）
```json
{
  "id": "q001",
  "category": "権利関係",
  "subcategory": "民法（総則）",
  "question": "問題文...",
  "choices": [
    "選択肢1",
    "選択肢2",
    "選択肢3",
    "選択肢4"
  ],
  "correct_index": 0,
  "explanation": "解説文..."
}
```

## 4. 技術スタック

| レイヤー | 技術 |
|----------|------|
| フレームワーク | Flutter (Dart) |
| ローカルDB | SQLite (sqflite) |
| 問題データ | JSON（アセットとしてバンドル） |
| 状態管理 | Riverpod（予定） |
| 広告 | Google AdMob (google_mobile_ads) |
| UI | Material Design 3 |

## 5. データベース設計（ローカルSQLite）

### テーブル: quiz_results（テスト結果）
| カラム | 型 | 説明 |
|--------|-----|------|
| id | INTEGER PK | 自動採番 |
| mode | TEXT | テストモード種別 |
| total_questions | INTEGER | 出題数 |
| correct_count | INTEGER | 正答数 |
| category_filter | TEXT | 分野フィルター（null=全分野） |
| created_at | TEXT | 実施日時 |

### テーブル: question_flags（問題フラグ）
| カラム | 型 | 説明 |
|--------|-----|------|
| question_id | TEXT PK | 問題ID |
| is_flagged | INTEGER | フラグ状態（1=ON） |
| wrong_count | INTEGER | 間違えた回数 |
| correct_count | INTEGER | 正解した回数 |
| last_answered_at | TEXT | 最終回答日時 |

## 6. 画面構成

```
ホーム画面
├── 一問一答モード
│   ├── 分野選択画面
│   └── 出題画面（問題→回答→解説）
├── テストモード
│   ├── 設定画面（問題数・分野選択）
│   ├── 出題画面（問題→回答→次へ）
│   └── 結果画面（スコア・分野別正答率）
├── 復習（間違えた問題）
│   └── フラグ付き問題一覧 → 出題画面
├── 学習記録
│   ├── テスト履歴一覧
│   └── 分野別正答率
└── 設定
    └── （将来拡張用）
```

## 7. デプロイ

| 項目 | 内容 |
|------|------|
| Phase 1 | Google Play リリース |
| Phase 2 | App Store リリース |
| 最低対応OS | Android 6.0+ / iOS 14+ |

## 8. 将来の拡張案（スコープ外）
- ダークモード対応
- 問題データのオンライン更新（サーバーから差分取得）
- リアルタイム生成モード（Claude API連携）
- ランキング機能
- 学習リマインダー通知
